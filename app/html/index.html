<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>FupConvert媒体处理器</title>
    <link rel="stylesheet" type="text/css" href="../css/icon.css">
	<link rel="stylesheet" type="text/css" href="../css/index.css">
</head>
<body>
<div id="app" v-on:keydown="shortcutFn">
    <header>
        <div class="draggable">
            <h1 class="title">多媒体处理器</h1>
            <div class="titlebar-tool">
                <button v-on:click="minimize">&minus;</button>
                <button v-on:click="wintoggle" v-bind:class="{full: isFullScreen}"><i></i></button>
                <button v-on:click="winclose">&times;</button>
            </div>
        </div>
        <section class="section-border">
            <div class="menu">
                <button>
                    <i class="icon icon-folder-open"></i> 打开
                    <input v-on:change="chosefile" type="file" title="打开" multiple>
                </button>
                <button v-on:click="startConvert" class="start-btn" title="开始">
                    <i class="icon icon-loop2"></i> 开始
                </button>
                <button v-on:click="gotoSetAll" title="设置">
                    <i class="icon icon-cog"></i> 设置
                </button>
            </div>
            <div class="drop-panel" v-bind:class="{slidedown:dropSlidedown}">
                <div class="drop-panel-group">
                    <button class="save-as">
                        输出目录：{{output}}
                        <input v-on:change="chosedir" type="file" title="文件保存为" nwdirectory>
                    </button>
                </div>
                <div class="drop-panel-group">
                    输出名称：
                    <input type="text" v-model="nameAll" placeholder="file%0d 说明：%0d表示名称后缀01，02，03...">
                </div>
                <div class="drop-panel-group">
                    宽度上限：
                    <input type="number" min="0" v-model="widthLimit" placeholder="auto"> &times;
                    高度上限：
                    <input type="number" min="0" v-model="heightLimit" placeholder="auto">
                </div>
                <div class="drop-panel-group">
                    大小上限：
                    <input type="number" min="0" v-model="sizeLimit" placeholder="auto"> (默认单位：KB, 可选单位：MB、 G)
                </div>
                <div class="drop-panel-group">
                    压缩速度：
                    <select title="速度越慢越清晰" v-model="speedLevel">
                        <option v-for="(speed, key) of speeds" v-bind:value="key">{{speed}}</option>
                    </select>
                    (压缩速度越慢越清晰)
                </div>
            </div>
        </section>
    </header>
    <div class="body">
        <section class="columns">
            <dl class="item" v-for="(item, index) of items" v-bind:class="{editable: item.editable}">
                <dt class="item-preview">
                    <div class="item-preview-inner">
                        <i class="item-media-type icon" v-bind:class="item.icon"></i>
                        <img class="item-preview-img" v-bind:src="item.source">
                        <div class="item-progress" v-if="item.progress" v-bind:style="{width: item.progress, background: item.progressColor}"></div>
                    </div>
                    <div class="item-tools">
                        <i class="item-tool icon icon-cog" v-on:click="itemFn(index,'edit')" title="设置参数"></i>
                        <i class="item-tool icon" v-on:click="itemFn(index,'lock')" title="锁定/解锁" v-bind:class="{'icon-lock': item.lock,'icon-unlocked':!item.lock}"></i>
                        <i class="item-tool icon icon-loop2" v-bind:class="{rotating:item.rotating}" v-on:click="itemFn(index,'convert')" title="转换我"></i>
                        <i class="item-tool icon icon-bin" v-on:click="itemFn(index,'del')" title="删除"></i>
                    </div>
                </dt>
                <dd class="item-info">
                    <div class="item-info-head">文件：</div>
                    <div class="item-info-body">
                        <div class="text-limit-2">{{item.name}}</div>
                    </div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        <span contenteditable="true" v-on:input="itemInputFn($event,index,'toname')">fup-{{item.name}}</span>
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">大小：</div>
                    <div class="item-info-body">{{item.size | sizemat('size')}} 
                        <span class="color-1">( {{item.tosize | sizemat('tosize')}} )</span>
                    </div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        限制：<span contenteditable="true" v-on:input="itemInputFn($event,index,'tosize')" v-on:blur="inputCompleted">0</span> %
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">尺寸：</div>
                    <div class="item-info-body">
                        {{item.width}} &times; {{item.height}} 
                        <span class="color-1">( {{item.towidth}} &times; {{item.toheight}} )</span>
                    </div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        <span contenteditable="true" v-on:input="itemInputFn($event,index,'towidth')" v-on:blur="inputCompleted" title="宽">0</span>
                        &times;
                        <span contenteditable="true" v-on:input="itemInputFn($event,index,'toheight')" v-on:blur="inputCompleted" title="高">0</span>
                        像素
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">格式：</div>
                    <div class="item-info-body">{{item.format}} <span class="color-1">( {{item.toformat}} )</span></div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        输出为：
                        <select title="选择输出格式" v-model="item.toformat">
                            <option v-for="format of item.toformats" v-bind:value="format">{{format}}</option>
                        </select>
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">截取：</div>
                    <div class="item-info-body">
                        <span class="color-1">( {{item.starttime | timemat}} - {{item.endtime | timemat}} )</span>
                    </div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        <div class="item-time">
                            <input type="range" step="0.001" min="0" v-bind:max="item.duration" v-model="item.curtime" v-on:change="itemFn(index,'curtime')" title="时间滑杆">
                        </div>
                        <div class="item-time curtime">当前时间：{{item.curtime | timemat}}</div>
                        <div class="item-time">
                            <button v-on:click="itemFn(index, 'setstart')" title="标记起点">标记起点</button>
                            <button v-on:click="itemFn(index, 'setend')" title="标记终点">标记终点</button>
                        </div>
                    </div>
                </dd>
            </dl>
        </section>
    </div>
    <footer class="footer draggable">
        <script>document.write('&copy; 2017-'+new Date().getFullYear()+' wenweipo.com')</script>
    </footer>
</div>
<script type="text/javascript" src="../plugins/vue.min.js"></script>
<script type="text/javascript" src="../js/index.js"></script>
</body>
</html>