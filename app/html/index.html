<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<title>FupConvert媒体处理器</title>
    <link rel="stylesheet" type="text/css" href="../css/icon.css">
	<link rel="stylesheet" type="text/css" href="../css/index.css">
</head>
<body>
<div id="app">
    <header>
        <div class="draggable">
            <h1>多媒体处理器</h1>
            <div class="titlebar-tool">
                <button v-on:click="minimize">&minus;</button>
                <button v-on:click="wintoggle" v-bind:class="{full: isFullScreen}"><i></i></button>
                <button v-on:click="winclose">&times;</button>
            </div>
        </div>
        <section class="section-border menu">
            <button class="file-btn">
                打开
                <input v-on:change="chosefile" type="file" title="打开" multiple>
            </button>
            <button class="file-btn">
                保存为
                <input v-on:change="chosedir" type="file" title="文件保存为" nwdirectory>
            </button>
            <button v-on:click="startConvert" class="start-btn" title="开始处理所有文件">开始</button>
            <button v-on:click="setAll" title="批量设置">批量设置</button>
            <input class="output-txt-area" type="text" readonly placeholder="未选择输出目录" v-bind:value="output">
        </section>
    </header>
    <div class="body">
        <section f-on-click="zoomInItem" f-bind-html="list" class="flex">
            <dl class="item" v-for="(item, index) of items" v-bind:class="{editable: item.editable}">
                <dt class="item-preview">
                    <div class="item-preview-inner">
                        <img class="item-preview-img" v-bind:src="item.source">
                        <div class="item-tools">
                            <i class="item-tool icon-border_color" v-on:click="itemFn(index,'edit')" title="编辑"></i>
                            <i class="item-tool icon-done" v-on:click="itemFn(index,'convert')" title="处理"></i>
                            <i class="item-tool icon-delete_forever" v-on:click="itemFn(index,'del')" title="删除"></i>
                            <i class="item-tool" v-on:click="itemFn(index,'lock')" title="锁定/解锁" v-bind:class="{'icon-lock': item.lock,'icon-lock-open':!item.lock}"></i>
                        </div>
                        <div class="item-progress" v-if="item.progress" v-bind:style="{width: item.progress, background: item.progressColor}"></div>
                    </div>
                </dt>
                <dd class="item-info">
                    <div class="item-info-head">文件：</div>
                    <div class="item-info-body">
                        <div class="text-limit-2">{{item.name}}</div>
                    </div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        <span contenteditable="true">{{item.toname}}</span>
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">大小：</div>
                    <div class="item-info-body">{{item.size}} - {{item.tosize}}</div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        压缩率：<input type="number" min="0" max="100" v-model="item.tosize"> %
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">尺寸：</div>
                    <div class="item-info-body">
                        {{item.width}} &times; {{item.height}} - {{item.towidth}} &times; {{item.toheight}}
                    </div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        <span contenteditable="true" title="宽">{{item.towidth}}</span>
                        &times;
                        <span contenteditable="true" title="高">{{item.toheight}}</span>
                        像素
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">格式：</div>
                    <div class="item-info-body">{{item.format}} - {{item.toformat}}</div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        输出为：
                        <select title="选择输出格式" v-model="item.toformat">
                            <option v-for="format of item.toformats" v-bind:value="format">{{format}}</option>
                        </select>
                    </div>
                </dd>
                <dd class="item-info">
                    <div class="item-info-head">截取：</div>
                    <div class="item-info-body">{{item.starttime | timemat}} - {{item.endtime | timemat}}</div>
                </dd>
                <dd class="item-info item-editable">
                    <div class="item-info-head"><i class="icon-subdirectory_arrow_right"></i></div>
                    <div class="item-info-body">
                        <div class="item-time">
                            <input type="range" step="0.001" v-bind:max="item.maxtime" v-model="item.curtime" v-on:change="itemFn(index,'curtime')" title="时间滑杆">
                        </div>
                        <div class="item-time curtime">当前时间：{{item.curtime | timemat}}</div>
                        <div class="item-time">
                            <button v-on:click="itemFn(index, 'setstart')" title="标记起点">标记起点</button>
                            <button v-on:click="itemFn(index, 'setend')" title="标记终点">标记终点</button>
                        </div>
                    </div>
                </dd>
            </dl>
        </section>
    </div>
    <footer class="footer draggable">
        <script>document.write('&copy; 2017-'+new Date().getFullYear()+' wenweipo.com')</script>
    </footer>
</div>
<script type="text/javascript" src="../plugins/vue.min.js"></script>
<script type="text/javascript" src="../js/index.js"></script>
</body>
</html>